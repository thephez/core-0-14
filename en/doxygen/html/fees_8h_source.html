<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.14"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Dash Core: src/policy/fees.h Source File</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="doxygen_stylesheetextra.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
		<div class="head"><div>
		<!--<a id="menumobile" class="menumobile" onclick="mobileMenuShow(event);" ontouchstart="mobileMenuShow(event);"></a>-->
		<a class="logo" href="/en/"><img src="logotop.png" alt="Dash"></img></a>
		<ul id="menusimple" class="menusimple menumain" onclick="mobileMenuHover(event);" ontouchstart="mobileMenuHover(event);">
		  <li><a href="/en/dash-for-developers">Developers</a></li>
		  <li><a>Documentation</a>
			<ul>
			  <li><a href="/en/developer-guide">Guide</a></li>
			  <li><a href="/en/developer-reference">Reference</a></li>
			  <li><a href="/en/developer-examples">Examples</a></li>
			  <li><a href="/en/developer-glossary">Glossary</a></li>
			</ul>
		  </li>
		  <li><a>Resources</a>
			<ul>
			  <li><a rel="noopener noreferrer" target="_blank" href="https://www.dash.org/community/">Community</a></li>
			  <li><a href="/en/vocabulary">Vocabulary</a></li>
			</ul>
		  </li>
		</ul>
		</div></div>
		<div class="body">
		<div class="breadcrumbs"></div>
		<div id="content" class="content">
		  <!-- <link rel="stylesheet" href="/css/jquery-ui.min.css"> -->
		  <h1>Dash Core Source Documentation (0.13.1.0)</h1>
		  <p class="summary">Find detailed information regarding the Dash Core source code.</p>
		<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<!--
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
			 <tbody>
			 <tr style="height: 56px;">
			  <td id="projectlogo"><img alt="Logo" src="logotop.png"/></td>
			  <td id="projectalign" style="padding-left: 0.5em;">
			   <div id="projectname">Dash Core
			   &#160;<span id="projectnumber">0.13.1.0</span>
			   </div>
			   <div id="projectbrief">P2P Digital Currency</div>
			  </td>
			 </tr>
			 </tbody>
			</table>
		</div>
		-->
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fees_8h_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fees.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fees_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright (c) 2009-2010 Satoshi Nakamoto</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Copyright (c) 2009-2015 The Bitcoin Core developers</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Distributed under the MIT software license, see the accompanying</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// file COPYING or http://www.opensource.org/licenses/mit-license.php.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#ifndef BITCOIN_POLICYESTIMATOR_H</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#define BITCOIN_POLICYESTIMATOR_H</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="amount_8h.html">amount.h</a>&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="uint256_8h.html">uint256.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="random_8h.html">random.h</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">class </span><a class="code" href="class_c_auto_file.html">CAutoFile</a>;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">class </span><a class="code" href="class_c_fee_rate.html">CFeeRate</a>;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">class </span><a class="code" href="class_c_tx_mem_pool_entry.html">CTxMemPoolEntry</a>;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">class </span><a class="code" href="class_c_tx_mem_pool.html">CTxMemPool</a>;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html">   70</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_tx_confirm_stats.html">TxConfirmStats</a></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">//Define the buckets we will group transactions into</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a1267be3e0742dcf549adcaa2e13e66f7">   74</a></span>&#160;    std::vector&lt;double&gt; <a class="code" href="class_tx_confirm_stats.html#a1267be3e0742dcf549adcaa2e13e66f7">buckets</a>;              <span class="comment">// The upper-bound of the range for the bucket (inclusive)</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a2f21d56ed1f23ec8d106526db25e8e6e">   75</a></span>&#160;    std::map&lt;double, unsigned int&gt; <a class="code" href="class_tx_confirm_stats.html#a2f21d56ed1f23ec8d106526db25e8e6e">bucketMap</a>; <span class="comment">// Map of bucket upper-bound to index into all vectors by bucket</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// For each bucket X:</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// Count the total # of txs in each bucket</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// Track the historical moving average of this total over blocks</span></div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a6d09b27bc31a4f7ce4a8104d61546d37">   80</a></span>&#160;    std::vector&lt;double&gt; <a class="code" href="class_tx_confirm_stats.html#a6d09b27bc31a4f7ce4a8104d61546d37">txCtAvg</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// and calculate the total for the current block to update the moving average</span></div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a91ea5d52ed3df7cc92e0383fcc0bf18d">   82</a></span>&#160;    std::vector&lt;int&gt; <a class="code" href="class_tx_confirm_stats.html#a91ea5d52ed3df7cc92e0383fcc0bf18d">curBlockTxCt</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// Count the total # of txs confirmed within Y blocks in each bucket</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// Track the historical moving average of theses totals over blocks</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#ab09c024915718a928764b2a6b69f8215">   86</a></span>&#160;    std::vector&lt;std::vector&lt;double&gt; &gt; <a class="code" href="class_tx_confirm_stats.html#ab09c024915718a928764b2a6b69f8215">confAvg</a>; <span class="comment">// confAvg[Y][X]</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// and calculate the totals for the current block to update the moving averages</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a96013d2383fb68757b4dc948a98b09fe">   88</a></span>&#160;    std::vector&lt;std::vector&lt;int&gt; &gt; <a class="code" href="class_tx_confirm_stats.html#a96013d2383fb68757b4dc948a98b09fe">curBlockConf</a>; <span class="comment">// curBlockConf[Y][X]</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// Sum the total feerate of all tx&#39;s in each bucket</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// Track the historical moving average of this total over blocks</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#aad7cdbbb2fccfe1abf2dbfb2cc0230ce">   92</a></span>&#160;    std::vector&lt;double&gt; <a class="code" href="class_tx_confirm_stats.html#aad7cdbbb2fccfe1abf2dbfb2cc0230ce">avg</a>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// and calculate the total for the current block to update the moving average</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a294a044fae770c4977f2ba46c78cdf2a">   94</a></span>&#160;    std::vector&lt;double&gt; <a class="code" href="class_tx_confirm_stats.html#a294a044fae770c4977f2ba46c78cdf2a">curBlockVal</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Combine the conf counts with tx counts to calculate the confirmation % for each Y,X</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// Combine the total value with the tx counts to calculate the avg feerate per bucket</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a61076f7531b27abbd85ec8bc7bc90ee2">   99</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="class_tx_confirm_stats.html#a61076f7531b27abbd85ec8bc7bc90ee2">decay</a>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// Mempool counts of outstanding transactions</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// For each bucket X, track the number of transactions in the mempool</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// that are unconfirmed for each possible confirmation value Y</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#ab80a5b84994e90d568f798632a510ab3">  104</a></span>&#160;    std::vector&lt;std::vector&lt;int&gt; &gt; <a class="code" href="class_tx_confirm_stats.html#ab80a5b84994e90d568f798632a510ab3">unconfTxs</a>;  <span class="comment">//unconfTxs[Y][X]</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// transactions still unconfirmed after MAX_CONFIRMS for each bucket</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#a80101a37c91a8953151d0c146bfbc635">  106</a></span>&#160;    std::vector&lt;int&gt; <a class="code" href="class_tx_confirm_stats.html#a80101a37c91a8953151d0c146bfbc635">oldUnconfTxs</a>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#aaa79a0de9be3619bc7084519b246aa01">Initialize</a>(std::vector&lt;double&gt;&amp; defaultBuckets, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxConfirms, <span class="keywordtype">double</span> <a class="code" href="class_tx_confirm_stats.html#a61076f7531b27abbd85ec8bc7bc90ee2">decay</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#a3cf61e975c43103bb2c1e5ac3f5b3cf8">ClearCurrent</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBlockHeight);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#a64281208674a51e15fb10a619bde2a51">Record</a>(<span class="keywordtype">int</span> blocksToConfirm, <span class="keywordtype">double</span> val);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_tx_confirm_stats.html#ae0b014c40cdf3c2207f2677774000261">NewTx</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBlockHeight, <span class="keywordtype">double</span> val);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#a421aa07c38b5f51dae2f2bdd725ba169">removeTx</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> entryHeight, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBestSeenHeight,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bucketIndex);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#a96211021e0e019a566a2126948861ead">UpdateMovingAverages</a>();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="class_tx_confirm_stats.html#a7ac4f70e6029ecf06e8d1528ab9c33f1">EstimateMedianVal</a>(<span class="keywordtype">int</span> confTarget, <span class="keywordtype">double</span> sufficientTxVal,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                             <span class="keywordtype">double</span> minSuccess, <span class="keywordtype">bool</span> requireGreater, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBlockHeight);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="class_tx_confirm_stats.html#ab2b42aa0beab3ed825ccc8486dfc0a84">  155</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_tx_confirm_stats.html#ab2b42aa0beab3ed825ccc8486dfc0a84">GetMaxConfirms</a>() { <span class="keywordflow">return</span> <a class="code" href="class_tx_confirm_stats.html#ab09c024915718a928764b2a6b69f8215">confAvg</a>.size(); }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#a61caf0db4ffeb8c112375e2aedf62499">Write</a>(<a class="code" href="class_c_auto_file.html">CAutoFile</a>&amp; <a class="code" href="util_8cpp.html#a5256be9be45ec4d0909f14a61d455e23">fileout</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_tx_confirm_stats.html#a3cc392ef180cd7bddd0181c1a73dd741">Read</a>(<a class="code" href="class_c_auto_file.html">CAutoFile</a>&amp; filein);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;};</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="fees_8h.html#a497b52dfe8ede3ddd28904d20172c030">  170</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="fees_8h.html#a497b52dfe8ede3ddd28904d20172c030">MAX_BLOCK_CONFIRMS</a> = 25;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="fees_8h.html#a7a2a101d1795850360f79d9e4d8cbbf4">  173</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#a7a2a101d1795850360f79d9e4d8cbbf4">DEFAULT_DECAY</a> = .998;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="fees_8h.html#aaf24bb74c1a77742398494fe80e76713">  176</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#aaf24bb74c1a77742398494fe80e76713">MIN_SUCCESS_PCT</a> = .95;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="fees_8h.html#afc18d5b08745c34352d5ee6bd9c8dfa2">  179</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#afc18d5b08745c34352d5ee6bd9c8dfa2">SUFFICIENT_FEETXS</a> = 1;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">// Minimum and Maximum values for tracking feerates</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="fees_8h.html#a4dd56a9e2595193426e8d0c63d6fd882">  182</a></span>&#160;<span class="keyword">static</span> constexpr <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#a4dd56a9e2595193426e8d0c63d6fd882">MIN_FEERATE</a> = 10;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="fees_8h.html#a1ae313c1efaf2d8962f06debeeabdb59">  183</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#a1ae313c1efaf2d8962f06debeeabdb59">MAX_FEERATE</a> = 1e7;</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="fees_8h.html#ae1c236d0bc9983de7c249b19628afdcd">  184</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#ae1c236d0bc9983de7c249b19628afdcd">INF_FEERATE</a> = <a class="code" href="amount_8h.html#a7af1fa1cd5a4e2c29be8ebefe37743d7">MAX_MONEY</a>;</div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="fees_8h.html#a7a1452c0779d913728b2567683a6377a">  185</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#a7a1452c0779d913728b2567683a6377a">INF_PRIORITY</a> = 1e9 * <a class="code" href="amount_8h.html#a7af1fa1cd5a4e2c29be8ebefe37743d7">MAX_MONEY</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">// We have to lump transactions into buckets based on feerate, but we want to be able</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">// to give accurate estimates over a large range of potential feerates</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">// Therefore it makes sense to exponentially space the buckets</span></div><div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="fees_8h.html#a7d6fd36ed44ed4800fa0fa9b0187643d">  191</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="fees_8h.html#a7d6fd36ed44ed4800fa0fa9b0187643d">FEE_SPACING</a> = 1.1;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html">  198</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_block_policy_estimator.html">CBlockPolicyEstimator</a></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="class_c_block_policy_estimator.html#a63578e09e192cb16bdd28ccf49e85c06">CBlockPolicyEstimator</a>(<span class="keyword">const</span> <a class="code" href="class_c_fee_rate.html">CFeeRate</a>&amp; minRelayFee);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_block_policy_estimator.html#a65e487a203acb59995c667ab91b87444">processBlock</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBlockHeight,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                      std::vector&lt;const CTxMemPoolEntry*&gt;&amp; entries);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_block_policy_estimator.html#adac45c8dba3d152590fc65b0ac831bda">processBlockTx</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nBlockHeight, <span class="keyword">const</span> <a class="code" href="class_c_tx_mem_pool_entry.html">CTxMemPoolEntry</a>* entry);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_block_policy_estimator.html#af34606ec5f6af217e23b47b8c3b2e361">processTransaction</a>(<span class="keyword">const</span> <a class="code" href="class_c_tx_mem_pool_entry.html">CTxMemPoolEntry</a>&amp; entry, <span class="keywordtype">bool</span> validFeeEstimate);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_block_policy_estimator.html#ab66a3e126ff0480ce528187ad7f3e668">removeTx</a>(<a class="code" href="classuint256.html">uint256</a> hash);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="class_c_fee_rate.html">CFeeRate</a> <a class="code" href="class_c_block_policy_estimator.html#a55418a0d0c84ff184d67b1bd366ca525">estimateFee</a>(<span class="keywordtype">int</span> confTarget);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="class_c_fee_rate.html">CFeeRate</a> <a class="code" href="class_c_block_policy_estimator.html#acc6d4370b7b3942507647904043b181a">estimateSmartFee</a>(<span class="keywordtype">int</span> confTarget, <span class="keywordtype">int</span> *answerFoundAtTarget, <span class="keyword">const</span> <a class="code" href="class_c_tx_mem_pool.html">CTxMemPool</a>&amp; pool);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="class_c_block_policy_estimator.html#adcaa52e6fdabbf8b0907bb5521aaa4f9">estimatePriority</a>(<span class="keywordtype">int</span> confTarget);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="class_c_block_policy_estimator.html#a81d98a40d7560a1edec92d565bb7ba4b">estimateSmartPriority</a>(<span class="keywordtype">int</span> confTarget, <span class="keywordtype">int</span> *answerFoundAtTarget, <span class="keyword">const</span> <a class="code" href="class_c_tx_mem_pool.html">CTxMemPool</a>&amp; pool);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_block_policy_estimator.html#a476fd39364402e84d3740fb2b52ba23d">Write</a>(<a class="code" href="class_c_auto_file.html">CAutoFile</a>&amp; <a class="code" href="util_8cpp.html#a5256be9be45ec4d0909f14a61d455e23">fileout</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_block_policy_estimator.html#a9fc44382bf69ca83be48ac86c07de70d">Read</a>(<a class="code" href="class_c_auto_file.html">CAutoFile</a>&amp; filein, <span class="keywordtype">int</span> nFileVersion);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html#a9855a86bd39817acc9de71a574e582c2">  247</a></span>&#160;    <a class="code" href="class_c_fee_rate.html">CFeeRate</a> <a class="code" href="class_c_block_policy_estimator.html#a9855a86bd39817acc9de71a574e582c2">minTrackedFee</a>;    </div><div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html#a208f2b05a4ca303a1814f88f0cfb3b5b">  248</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_c_block_policy_estimator.html#a208f2b05a4ca303a1814f88f0cfb3b5b">nBestSeenHeight</a>;</div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html">  249</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html">TxStatsInfo</a></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div><div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#ac37d5112a8964476a7931f685787edaf">  251</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#ac37d5112a8964476a7931f685787edaf">blockHeight</a>;</div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#acb1b89ef61a16e915596b2f77d6f1766">  252</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#acb1b89ef61a16e915596b2f77d6f1766">bucketIndex</a>;</div><div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#a08f45b4d6c448c52b619c6958a4c2f35">  253</a></span>&#160;        <a class="code" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#a08f45b4d6c448c52b619c6958a4c2f35">TxStatsInfo</a>() : <a class="code" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#ac37d5112a8964476a7931f685787edaf">blockHeight</a>(0), <a class="code" href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#acb1b89ef61a16e915596b2f77d6f1766">bucketIndex</a>(0) {}</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    };</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// map of txids to information about that transaction</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html#ae3af28a53439328591107672c9ad84b1">  257</a></span>&#160;    std::map&lt;uint256, TxStatsInfo&gt; <a class="code" href="class_c_block_policy_estimator.html#ae3af28a53439328591107672c9ad84b1">mapMemPoolTxs</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html#a2b2e4283eb4ee6a03df4ab084c74ce1c">  260</a></span>&#160;    <a class="code" href="class_tx_confirm_stats.html">TxConfirmStats</a> <a class="code" href="class_c_block_policy_estimator.html#a2b2e4283eb4ee6a03df4ab084c74ce1c">feeStats</a>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html#a6bc5f98212cfaa17c406ad8c35717086">  262</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_c_block_policy_estimator.html#a6bc5f98212cfaa17c406ad8c35717086">trackedTxs</a>;</div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="class_c_block_policy_estimator.html#a1fab85289584c4b2a0a48ce97eb3cb0f">  263</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_c_block_policy_estimator.html#a1fab85289584c4b2a0a48ce97eb3cb0f">untrackedTxs</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;};</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/*BITCOIN_POLICYESTIMATOR_H */</span><span class="preprocessor"></span></div><div class="ttc" id="class_tx_confirm_stats_html_a294a044fae770c4977f2ba46c78cdf2a"><div class="ttname"><a href="class_tx_confirm_stats.html#a294a044fae770c4977f2ba46c78cdf2a">TxConfirmStats::curBlockVal</a></div><div class="ttdeci">std::vector&lt; double &gt; curBlockVal</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00094">fees.h:94</a></div></div>
<div class="ttc" id="struct_c_block_policy_estimator_1_1_tx_stats_info_html_ac37d5112a8964476a7931f685787edaf"><div class="ttname"><a href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#ac37d5112a8964476a7931f685787edaf">CBlockPolicyEstimator::TxStatsInfo::blockHeight</a></div><div class="ttdeci">unsigned int blockHeight</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00251">fees.h:251</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a476fd39364402e84d3740fb2b52ba23d"><div class="ttname"><a href="class_c_block_policy_estimator.html#a476fd39364402e84d3740fb2b52ba23d">CBlockPolicyEstimator::Write</a></div><div class="ttdeci">void Write(CAutoFile &amp;fileout)</div><div class="ttdoc">Write estimation data to a file. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00471">fees.cpp:471</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_ab2b42aa0beab3ed825ccc8486dfc0a84"><div class="ttname"><a href="class_tx_confirm_stats.html#ab2b42aa0beab3ed825ccc8486dfc0a84">TxConfirmStats::GetMaxConfirms</a></div><div class="ttdeci">unsigned int GetMaxConfirms()</div><div class="ttdoc">Return the max number of confirms we&amp;#39;re tracking. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00155">fees.h:155</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_acc6d4370b7b3942507647904043b181a"><div class="ttname"><a href="class_c_block_policy_estimator.html#acc6d4370b7b3942507647904043b181a">CBlockPolicyEstimator::estimateSmartFee</a></div><div class="ttdeci">CFeeRate estimateSmartFee(int confTarget, int *answerFoundAtTarget, const CTxMemPool &amp;pool)</div><div class="ttdoc">Estimate feerate needed to get be included in a block within confTarget blocks. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00422">fees.cpp:422</a></div></div>
<div class="ttc" id="fees_8h_html_a4dd56a9e2595193426e8d0c63d6fd882"><div class="ttname"><a href="fees_8h.html#a4dd56a9e2595193426e8d0c63d6fd882">MIN_FEERATE</a></div><div class="ttdeci">static constexpr double MIN_FEERATE</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00182">fees.h:182</a></div></div>
<div class="ttc" id="amount_8h_html_a7af1fa1cd5a4e2c29be8ebefe37743d7"><div class="ttname"><a href="amount_8h.html#a7af1fa1cd5a4e2c29be8ebefe37743d7">MAX_MONEY</a></div><div class="ttdeci">static const CAmount MAX_MONEY</div><div class="ttdoc">No amount larger than this (in satoshi) is valid. </div><div class="ttdef"><b>Definition:</b> <a href="amount_8h_source.html#l00031">amount.h:31</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a96013d2383fb68757b4dc948a98b09fe"><div class="ttname"><a href="class_tx_confirm_stats.html#a96013d2383fb68757b4dc948a98b09fe">TxConfirmStats::curBlockConf</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; curBlockConf</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00088">fees.h:88</a></div></div>
<div class="ttc" id="util_8cpp_html_a5256be9be45ec4d0909f14a61d455e23"><div class="ttname"><a href="util_8cpp.html#a5256be9be45ec4d0909f14a61d455e23">fileout</a></div><div class="ttdeci">static FILE * fileout</div><div class="ttdoc">We use boost::call_once() to make sure mutexDebugLog and vMsgsBeforeOpenLog are initialized in a thre...</div><div class="ttdef"><b>Definition:</b> <a href="util_8cpp_source.html#l00215">util.cpp:215</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_aad7cdbbb2fccfe1abf2dbfb2cc0230ce"><div class="ttname"><a href="class_tx_confirm_stats.html#aad7cdbbb2fccfe1abf2dbfb2cc0230ce">TxConfirmStats::avg</a></div><div class="ttdeci">std::vector&lt; double &gt; avg</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00092">fees.h:92</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html"><div class="ttname"><a href="class_tx_confirm_stats.html">TxConfirmStats</a></div><div class="ttdoc">We will instantiate an instance of this class to track transactions that were included in a block...</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00070">fees.h:70</a></div></div>
<div class="ttc" id="struct_c_block_policy_estimator_1_1_tx_stats_info_html_acb1b89ef61a16e915596b2f77d6f1766"><div class="ttname"><a href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#acb1b89ef61a16e915596b2f77d6f1766">CBlockPolicyEstimator::TxStatsInfo::bucketIndex</a></div><div class="ttdeci">unsigned int bucketIndex</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00252">fees.h:252</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a208f2b05a4ca303a1814f88f0cfb3b5b"><div class="ttname"><a href="class_c_block_policy_estimator.html#a208f2b05a4ca303a1814f88f0cfb3b5b">CBlockPolicyEstimator::nBestSeenHeight</a></div><div class="ttdeci">unsigned int nBestSeenHeight</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00248">fees.h:248</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a61076f7531b27abbd85ec8bc7bc90ee2"><div class="ttname"><a href="class_tx_confirm_stats.html#a61076f7531b27abbd85ec8bc7bc90ee2">TxConfirmStats::decay</a></div><div class="ttdeci">double decay</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00099">fees.h:99</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a64281208674a51e15fb10a619bde2a51"><div class="ttname"><a href="class_tx_confirm_stats.html#a64281208674a51e15fb10a619bde2a51">TxConfirmStats::Record</a></div><div class="ttdeci">void Record(int blocksToConfirm, double val)</div><div class="ttdoc">Record a new transaction data point in the current block stats. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00053">fees.cpp:53</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_adcaa52e6fdabbf8b0907bb5521aaa4f9"><div class="ttname"><a href="class_c_block_policy_estimator.html#adcaa52e6fdabbf8b0907bb5521aaa4f9">CBlockPolicyEstimator::estimatePriority</a></div><div class="ttdeci">double estimatePriority(int confTarget)</div><div class="ttdoc">Return a priority estimate. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00453">fees.cpp:453</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a2b2e4283eb4ee6a03df4ab084c74ce1c"><div class="ttname"><a href="class_c_block_policy_estimator.html#a2b2e4283eb4ee6a03df4ab084c74ce1c">CBlockPolicyEstimator::feeStats</a></div><div class="ttdeci">TxConfirmStats feeStats</div><div class="ttdoc">Classes to track historical data on transaction confirmations. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00260">fees.h:260</a></div></div>
<div class="ttc" id="fees_8h_html_ae1c236d0bc9983de7c249b19628afdcd"><div class="ttname"><a href="fees_8h.html#ae1c236d0bc9983de7c249b19628afdcd">INF_FEERATE</a></div><div class="ttdeci">static const double INF_FEERATE</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00184">fees.h:184</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a421aa07c38b5f51dae2f2bdd725ba169"><div class="ttname"><a href="class_tx_confirm_stats.html#a421aa07c38b5f51dae2f2bdd725ba169">TxConfirmStats::removeTx</a></div><div class="ttdeci">void removeTx(unsigned int entryHeight, unsigned int nBestSeenHeight, unsigned int bucketIndex)</div><div class="ttdoc">Remove a transaction from mempool tracking stats. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00255">fees.cpp:255</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a9855a86bd39817acc9de71a574e582c2"><div class="ttname"><a href="class_c_block_policy_estimator.html#a9855a86bd39817acc9de71a574e582c2">CBlockPolicyEstimator::minTrackedFee</a></div><div class="ttdeci">CFeeRate minTrackedFee</div><div class="ttdoc">Passed to constructor to avoid dependency on main. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00247">fees.h:247</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a3cf61e975c43103bb2c1e5ac3f5b3cf8"><div class="ttname"><a href="class_tx_confirm_stats.html#a3cf61e975c43103bb2c1e5ac3f5b3cf8">TxConfirmStats::ClearCurrent</a></div><div class="ttdeci">void ClearCurrent(unsigned int nBlockHeight)</div><div class="ttdoc">Clear the state of the curBlock variables to start counting for the new block. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00040">fees.cpp:40</a></div></div>
<div class="ttc" id="class_c_tx_mem_pool_entry_html"><div class="ttname"><a href="class_c_tx_mem_pool_entry.html">CTxMemPoolEntry</a></div><div class="ttdoc">CTxMemPoolEntry stores data about the corresponding transaction, as well as data about all in-mempool...</div><div class="ttdef"><b>Definition:</b> <a href="txmempool_8h_source.html#l00087">txmempool.h:87</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_ab09c024915718a928764b2a6b69f8215"><div class="ttname"><a href="class_tx_confirm_stats.html#ab09c024915718a928764b2a6b69f8215">TxConfirmStats::confAvg</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; double &gt; &gt; confAvg</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00086">fees.h:86</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_ae0b014c40cdf3c2207f2677774000261"><div class="ttname"><a href="class_tx_confirm_stats.html#ae0b014c40cdf3c2207f2677774000261">TxConfirmStats::NewTx</a></div><div class="ttdeci">unsigned int NewTx(unsigned int nBlockHeight, double val)</div><div class="ttdoc">Record a new transaction entering the mempool. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00247">fees.cpp:247</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html"><div class="ttname"><a href="class_c_block_policy_estimator.html">CBlockPolicyEstimator</a></div><div class="ttdoc">We want to be able to estimate feerates that are needed on tx&amp;#39;s to be included in a certain number of...</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00198">fees.h:198</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a1267be3e0742dcf549adcaa2e13e66f7"><div class="ttname"><a href="class_tx_confirm_stats.html#a1267be3e0742dcf549adcaa2e13e66f7">TxConfirmStats::buckets</a></div><div class="ttdeci">std::vector&lt; double &gt; buckets</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00074">fees.h:74</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a6bc5f98212cfaa17c406ad8c35717086"><div class="ttname"><a href="class_c_block_policy_estimator.html#a6bc5f98212cfaa17c406ad8c35717086">CBlockPolicyEstimator::trackedTxs</a></div><div class="ttdeci">unsigned int trackedTxs</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00262">fees.h:262</a></div></div>
<div class="ttc" id="struct_c_block_policy_estimator_1_1_tx_stats_info_html_a08f45b4d6c448c52b619c6958a4c2f35"><div class="ttname"><a href="struct_c_block_policy_estimator_1_1_tx_stats_info.html#a08f45b4d6c448c52b619c6958a4c2f35">CBlockPolicyEstimator::TxStatsInfo::TxStatsInfo</a></div><div class="ttdeci">TxStatsInfo()</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00253">fees.h:253</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_ae3af28a53439328591107672c9ad84b1"><div class="ttname"><a href="class_c_block_policy_estimator.html#ae3af28a53439328591107672c9ad84b1">CBlockPolicyEstimator::mapMemPoolTxs</a></div><div class="ttdeci">std::map&lt; uint256, TxStatsInfo &gt; mapMemPoolTxs</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00257">fees.h:257</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a63578e09e192cb16bdd28ccf49e85c06"><div class="ttname"><a href="class_c_block_policy_estimator.html#a63578e09e192cb16bdd28ccf49e85c06">CBlockPolicyEstimator::CBlockPolicyEstimator</a></div><div class="ttdeci">CBlockPolicyEstimator(const CFeeRate &amp;minRelayFee)</div><div class="ttdoc">Create new BlockPolicyEstimator and initialize stats tracking classes with default values...</div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00300">fees.cpp:300</a></div></div>
<div class="ttc" id="fees_8h_html_afc18d5b08745c34352d5ee6bd9c8dfa2"><div class="ttname"><a href="fees_8h.html#afc18d5b08745c34352d5ee6bd9c8dfa2">SUFFICIENT_FEETXS</a></div><div class="ttdeci">static const double SUFFICIENT_FEETXS</div><div class="ttdoc">Require an avg of 1 tx in the combined feerate bucket per block to have stat significance. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00179">fees.h:179</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_ab66a3e126ff0480ce528187ad7f3e668"><div class="ttname"><a href="class_c_block_policy_estimator.html#ab66a3e126ff0480ce528187ad7f3e668">CBlockPolicyEstimator::removeTx</a></div><div class="ttdeci">bool removeTx(uint256 hash)</div><div class="ttdoc">Remove a transaction from the mempool tracking stats. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00288">fees.cpp:288</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_ab80a5b84994e90d568f798632a510ab3"><div class="ttname"><a href="class_tx_confirm_stats.html#ab80a5b84994e90d568f798632a510ab3">TxConfirmStats::unconfTxs</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; int &gt; &gt; unconfTxs</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00104">fees.h:104</a></div></div>
<div class="ttc" id="classuint256_html"><div class="ttname"><a href="classuint256.html">uint256</a></div><div class="ttdoc">256-bit opaque blob. </div><div class="ttdef"><b>Definition:</b> <a href="uint256_8h_source.html#l00124">uint256.h:124</a></div></div>
<div class="ttc" id="struct_c_block_policy_estimator_1_1_tx_stats_info_html"><div class="ttname"><a href="struct_c_block_policy_estimator_1_1_tx_stats_info.html">CBlockPolicyEstimator::TxStatsInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00249">fees.h:249</a></div></div>
<div class="ttc" id="fees_8h_html_a7a2a101d1795850360f79d9e4d8cbbf4"><div class="ttname"><a href="fees_8h.html#a7a2a101d1795850360f79d9e4d8cbbf4">DEFAULT_DECAY</a></div><div class="ttdeci">static const double DEFAULT_DECAY</div><div class="ttdoc">Decay of .998 is a half-life of 346 blocks or about 14.4 hours. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00173">fees.h:173</a></div></div>
<div class="ttc" id="class_c_tx_mem_pool_html"><div class="ttname"><a href="class_c_tx_mem_pool.html">CTxMemPool</a></div><div class="ttdoc">CTxMemPool stores valid-according-to-the-current-best-chain transactions that may be included in the ...</div><div class="ttdef"><b>Definition:</b> <a href="txmempool_8h_source.html#l00451">txmempool.h:451</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a80101a37c91a8953151d0c146bfbc635"><div class="ttname"><a href="class_tx_confirm_stats.html#a80101a37c91a8953151d0c146bfbc635">TxConfirmStats::oldUnconfTxs</a></div><div class="ttdeci">std::vector&lt; int &gt; oldUnconfTxs</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00106">fees.h:106</a></div></div>
<div class="ttc" id="fees_8h_html_aaf24bb74c1a77742398494fe80e76713"><div class="ttname"><a href="fees_8h.html#aaf24bb74c1a77742398494fe80e76713">MIN_SUCCESS_PCT</a></div><div class="ttdeci">static const double MIN_SUCCESS_PCT</div><div class="ttdoc">Require greater than 95% of X feerate transactions to be confirmed within Y blocks for X to be big en...</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00176">fees.h:176</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a65e487a203acb59995c667ab91b87444"><div class="ttname"><a href="class_c_block_policy_estimator.html#a65e487a203acb59995c667ab91b87444">CBlockPolicyEstimator::processBlock</a></div><div class="ttdeci">void processBlock(unsigned int nBlockHeight, std::vector&lt; const CTxMemPoolEntry *&gt; &amp;entries)</div><div class="ttdoc">Process all the transactions that have been included in a block. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00370">fees.cpp:370</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a3cc392ef180cd7bddd0181c1a73dd741"><div class="ttname"><a href="class_tx_confirm_stats.html#a3cc392ef180cd7bddd0181c1a73dd741">TxConfirmStats::Read</a></div><div class="ttdeci">void Read(CAutoFile &amp;filein)</div><div class="ttdoc">Read saved state of estimation data from a file and replace all internal data structures and variable...</div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00184">fees.cpp:184</a></div></div>
<div class="ttc" id="uint256_8h_html"><div class="ttname"><a href="uint256_8h.html">uint256.h</a></div></div>
<div class="ttc" id="fees_8h_html_a7a1452c0779d913728b2567683a6377a"><div class="ttname"><a href="fees_8h.html#a7a1452c0779d913728b2567683a6377a">INF_PRIORITY</a></div><div class="ttdeci">static const double INF_PRIORITY</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00185">fees.h:185</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a55418a0d0c84ff184d67b1bd366ca525"><div class="ttname"><a href="class_c_block_policy_estimator.html#a55418a0d0c84ff184d67b1bd366ca525">CBlockPolicyEstimator::estimateFee</a></div><div class="ttdeci">CFeeRate estimateFee(int confTarget)</div><div class="ttdoc">Return a feerate estimate. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00407">fees.cpp:407</a></div></div>
<div class="ttc" id="fees_8h_html_a1ae313c1efaf2d8962f06debeeabdb59"><div class="ttname"><a href="fees_8h.html#a1ae313c1efaf2d8962f06debeeabdb59">MAX_FEERATE</a></div><div class="ttdeci">static const double MAX_FEERATE</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00183">fees.h:183</a></div></div>
<div class="ttc" id="class_c_fee_rate_html"><div class="ttname"><a href="class_c_fee_rate.html">CFeeRate</a></div><div class="ttdoc">Fee rate in satoshis per kilobyte: CAmount / kB. </div><div class="ttdef"><b>Definition:</b> <a href="amount_8h_source.html#l00037">amount.h:37</a></div></div>
<div class="ttc" id="amount_8h_html"><div class="ttname"><a href="amount_8h.html">amount.h</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a7ac4f70e6029ecf06e8d1528ab9c33f1"><div class="ttname"><a href="class_tx_confirm_stats.html#a7ac4f70e6029ecf06e8d1528ab9c33f1">TxConfirmStats::EstimateMedianVal</a></div><div class="ttdeci">double EstimateMedianVal(int confTarget, double sufficientTxVal, double minSuccess, bool requireGreater, unsigned int nBlockHeight)</div><div class="ttdoc">Calculate a feerate estimate. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00077">fees.cpp:77</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a61caf0db4ffeb8c112375e2aedf62499"><div class="ttname"><a href="class_tx_confirm_stats.html#a61caf0db4ffeb8c112375e2aedf62499">TxConfirmStats::Write</a></div><div class="ttdeci">void Write(CAutoFile &amp;fileout)</div><div class="ttdoc">Write state of estimation data to a file. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00175">fees.cpp:175</a></div></div>
<div class="ttc" id="random_8h_html"><div class="ttname"><a href="random_8h.html">random.h</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_adac45c8dba3d152590fc65b0ac831bda"><div class="ttname"><a href="class_c_block_policy_estimator.html#adac45c8dba3d152590fc65b0ac831bda">CBlockPolicyEstimator::processBlockTx</a></div><div class="ttdeci">bool processBlockTx(unsigned int nBlockHeight, const CTxMemPoolEntry *entry)</div><div class="ttdoc">Process a transaction confirmed in a block. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00345">fees.cpp:345</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a9fc44382bf69ca83be48ac86c07de70d"><div class="ttname"><a href="class_c_block_policy_estimator.html#a9fc44382bf69ca83be48ac86c07de70d">CBlockPolicyEstimator::Read</a></div><div class="ttdeci">void Read(CAutoFile &amp;filein, int nFileVersion)</div><div class="ttdoc">Read estimation data from a file. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00477">fees.cpp:477</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a6d09b27bc31a4f7ce4a8104d61546d37"><div class="ttname"><a href="class_tx_confirm_stats.html#a6d09b27bc31a4f7ce4a8104d61546d37">TxConfirmStats::txCtAvg</a></div><div class="ttdeci">std::vector&lt; double &gt; txCtAvg</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00080">fees.h:80</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a1fab85289584c4b2a0a48ce97eb3cb0f"><div class="ttname"><a href="class_c_block_policy_estimator.html#a1fab85289584c4b2a0a48ce97eb3cb0f">CBlockPolicyEstimator::untrackedTxs</a></div><div class="ttdeci">unsigned int untrackedTxs</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00263">fees.h:263</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a96211021e0e019a566a2126948861ead"><div class="ttname"><a href="class_tx_confirm_stats.html#a96211021e0e019a566a2126948861ead">TxConfirmStats::UpdateMovingAverages</a></div><div class="ttdeci">void UpdateMovingAverages()</div><div class="ttdoc">Update our estimates by decaying our historical moving average and updating with the data gathered fr...</div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00066">fees.cpp:66</a></div></div>
<div class="ttc" id="fees_8h_html_a497b52dfe8ede3ddd28904d20172c030"><div class="ttname"><a href="fees_8h.html#a497b52dfe8ede3ddd28904d20172c030">MAX_BLOCK_CONFIRMS</a></div><div class="ttdeci">static const unsigned int MAX_BLOCK_CONFIRMS</div><div class="ttdoc">Track confirm delays up to 25 blocks, can&amp;#39;t estimate beyond that. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00170">fees.h:170</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_aaa79a0de9be3619bc7084519b246aa01"><div class="ttname"><a href="class_tx_confirm_stats.html#aaa79a0de9be3619bc7084519b246aa01">TxConfirmStats::Initialize</a></div><div class="ttdeci">void Initialize(std::vector&lt; double &gt; &amp;defaultBuckets, unsigned int maxConfirms, double decay)</div><div class="ttdoc">Initialize the data structures. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00015">fees.cpp:15</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a91ea5d52ed3df7cc92e0383fcc0bf18d"><div class="ttname"><a href="class_tx_confirm_stats.html#a91ea5d52ed3df7cc92e0383fcc0bf18d">TxConfirmStats::curBlockTxCt</a></div><div class="ttdeci">std::vector&lt; int &gt; curBlockTxCt</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00082">fees.h:82</a></div></div>
<div class="ttc" id="class_c_auto_file_html"><div class="ttname"><a href="class_c_auto_file.html">CAutoFile</a></div><div class="ttdoc">Non-refcounted RAII wrapper for FILE*. </div><div class="ttdef"><b>Definition:</b> <a href="streams_8h_source.html#l00412">streams.h:412</a></div></div>
<div class="ttc" id="fees_8h_html_a7d6fd36ed44ed4800fa0fa9b0187643d"><div class="ttname"><a href="fees_8h.html#a7d6fd36ed44ed4800fa0fa9b0187643d">FEE_SPACING</a></div><div class="ttdeci">static const double FEE_SPACING</div><div class="ttdoc">Spacing of FeeRate buckets. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00191">fees.h:191</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_af34606ec5f6af217e23b47b8c3b2e361"><div class="ttname"><a href="class_c_block_policy_estimator.html#af34606ec5f6af217e23b47b8c3b2e361">CBlockPolicyEstimator::processTransaction</a></div><div class="ttdeci">void processTransaction(const CTxMemPoolEntry &amp;entry, bool validFeeEstimate)</div><div class="ttdoc">Process a transaction accepted to the mempool. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00313">fees.cpp:313</a></div></div>
<div class="ttc" id="class_tx_confirm_stats_html_a2f21d56ed1f23ec8d106526db25e8e6e"><div class="ttname"><a href="class_tx_confirm_stats.html#a2f21d56ed1f23ec8d106526db25e8e6e">TxConfirmStats::bucketMap</a></div><div class="ttdeci">std::map&lt; double, unsigned int &gt; bucketMap</div><div class="ttdef"><b>Definition:</b> <a href="fees_8h_source.html#l00075">fees.h:75</a></div></div>
<div class="ttc" id="class_c_block_policy_estimator_html_a81d98a40d7560a1edec92d565bb7ba4b"><div class="ttname"><a href="class_c_block_policy_estimator.html#a81d98a40d7560a1edec92d565bb7ba4b">CBlockPolicyEstimator::estimateSmartPriority</a></div><div class="ttdeci">double estimateSmartPriority(int confTarget, int *answerFoundAtTarget, const CTxMemPool &amp;pool)</div><div class="ttdoc">Estimate priority needed to get be included in a block within confTarget blocks. </div><div class="ttdef"><b>Definition:</b> <a href="fees_8cpp_source.html#l00458">fees.cpp:458</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
		<!-- HTML footer for doxygen 1.8.14-->
		<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
		  <ul>
			<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_f9a362818448b8ef6661813ae65d7e79.html">policy</a></li><li class="navelem"><a class="el" href="fees_8h.html">fees.h</a></li>
			<li class="footer">Generated on Wed Mar 20 2019 18:11:44 for Dash Core by
			<a href="http://www.doxygen.org/index.html">
			<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
		  </ul>
		</div>
		</div>
		<div class="ddfooter">
			<div class="footerlicense">Released under the <a href="http://opensource.org/licenses/mit-license.php" target="_blank">MIT license</a></div>
		  </div>
		</div>
	</body>
</html>
